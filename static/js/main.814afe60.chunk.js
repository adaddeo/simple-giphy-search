(window["webpackJsonpsimple-giphy-search"]=window["webpackJsonpsimple-giphy-search"]||[]).push([[0],{37:function(e,t,n){e.exports=n(77)},54:function(e,t,n){},60:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=60},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(10),u=n.n(c),o=n(3),a=n(1),l=n(22),f=n.n(l),s=n(33),d=n(5),p=n(12),v=new(n(11).GiphyFetch)("5yFUiFNdRnPjpeUhzS2T2LGyw1Fi9ClD");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(){return function(e,t){var n=t(),r=n.search.query,i=n.gifs,c=i.id,u=i.offset;return e({type:"gifs/FETCH",payload:new Promise(function(){var e=Object(s.a)(f.a.mark(function e(t){var n,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=""===r?v.trending({offset:u}):v.search(r,{offset:u}),e.next=3,n;case 3:i=e.sent,t({id:c,response:i});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{id:e,gifs:[],pendingRequests:0,offset:0}},h="search/UPDATE_QUERY",y=(n(54),n(13)),w="viewer/CLOSE",j=n(14),E=Object(j.a)(function(e){return e.gifs.pendingRequests},function(e){return e>0}),P=Object(j.a)(function(e){return e.gifs.offset},function(e){return e.gifs.totalCount},function(e,t){return void 0===t||e<t}),k=Object(j.a)(function(e){return e.viewer.gifIndex},function(e){return e.gifs.gifs},function(e,t){return null!==e?t[e]:null}),q=(n(73),function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=Object(a.a)(t,2),i=n[0],c=n[1],u=Object(r.useCallback)(function(){null!==e.current&&c(e.current.getBoundingClientRect())},[e]),o=Object(r.useCallback)(function(t){null!==t&&(e.current=t,u())},[u]);return Object(r.useEffect)(function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[i,o]});var C={close:function(){return{type:w}}},x=Object(o.b)(function(e){return{gif:k(e)}},C)(function(e){var t=e.gif,n=e.close,c=q(),u=Object(a.a)(c,2),o=u[0],l=u[1];if(Object(r.useEffect)(function(){return document.documentElement.style.overflow=null!==t?"hidden":null,document.body.style.overflowY=null!==t?"scroll":null,function(){document.documentElement.style.overflow=null,document.body.style.overflowY=null}},[t]),Object(r.useEffect)(function(){function e(e){"Escape"===e.key&&n()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),null===t)return null;var f=600;if(null!==o){var s=t.images.original,d=Math.min(2*s.width,o.width);f=s.height/s.width*d>o.height?o.height*s.width/s.height:d}return i.a.createElement("div",{className:"fullscreen-viewer",onClick:function(e){n(),e.preventDefault()}},i.a.createElement("div",{ref:l,className:"fullscreen-viewer-content"},i.a.createElement(y.Gif,{gif:t,width:f,backgroundColor:"black"})))}),D=(n(74),n(19));function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach(function(t){Object(p.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Object(r.useRef)(t);return Object(r.useEffect)(function(){null===i.current||null!==c.current&&u.current===t||(c.current=Object(D.default)(N({},e,{container:i.current})),c.current.resize(!0).pack(),u.current=t),null!==c.current&&c.current.update()},[i].concat(Object(d.a)(n))),{ref:i,currentSize:R(e.sizes)}};function R(e){return e.reduce(function(e,t){return window.matchMedia("(min-width: ".concat(t.mq,")")).matches?t:e})}var F=function(e){var t=e.element,n=e.onVisiblilityChange,i=e.threshold,c=void 0===i?0:i,u=e.rootMargin,o=void 0===u?"0px":u;Object(r.useEffect)(function(){var e=new IntersectionObserver(function(e){var t=Object(a.a)(e,1)[0];n(t.isIntersecting)},{threshold:c,rootMargin:o});return null!==t&&e.observe(t),function(){null!==t&&e.disconnect()}})},L=(n(75),function(){return i.a.createElement("div",{className:"lds-ellipsis"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))});var S={fetchGifs:b,openGif:function(e){return{type:"viewer/OPEN_GIF",payload:{gifIndex:e}}}},z=Object(o.b)(function(e){return{query:e.search.query,gifs:e.gifs.gifs,isLoading:E(e),moreGifs:P(e)}},S)(function(e){var t=e.query,n=e.gifs,c=e.isLoading,u=e.moreGifs,o=e.fetchGifs,l=e.openGif,f=I({packed:"packed",sizes:[{columns:2,gutter:8},{mq:"768px",columns:3,gutter:12},{mq:"1024px",columns:4,gutter:16},{mq:"1260px",columns:4,gutter:16}]},t,[n]),s=f.ref,d=f.currentSize,p=d.gutter,v=d.columns,g=200,m=q(),b=Object(a.a)(m,2),O=b[0],h=b[1];null!==O&&(g=Math.floor((O.width-p*(v-1))/v));var w=Object(r.useRef)(null);return F({element:w.current,onVisiblilityChange:function(e){e&&!c&&u&&o()},rootMargin:"200px"}),i.a.createElement("div",{ref:h},i.a.createElement("div",{ref:s,key:t},n.map(function(e,t){return i.a.createElement(y.Gif,{key:e.id,gif:e,width:g,backgroundColor:"#e8f4fd",onGifClick:function(e,n){return function(e,t){l(e),t.stopPropagation(),t.preventDefault()}(t,n)}})})),u&&i.a.createElement("div",{ref:w,className:"loader-container"},c&&i.a.createElement(L,null)))});var M={search:function(e){return function(t){t(function(e){return{type:h,payload:{query:e}}}(e)),t(b())}}},_=Object(o.b)(null,M)(function(e){var t=e.search,n=Object(r.useState)(""),c=Object(a.a)(n,2),u=c[0],o=c[1];return i.a.createElement("div",{className:"app container"},i.a.createElement("nav",{className:"header"},i.a.createElement("div",{className:"header-content container"},i.a.createElement("form",{onSubmit:function(e){t(u),e.preventDefault()}},i.a.createElement("input",{type:"text",placeholder:"Search for GIFs",value:u,onChange:function(e){o(e.target.value)}})))),i.a.createElement("div",{className:"main"},i.a.createElement(z,null),i.a.createElement(x,null)))}),U=n(4),T=n(34),H=n(35),Y=n(36),B={search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:""},t=arguments.length>1?arguments[1]:void 0;if(t.type===h){var n=t.payload.query;return{query:n}}return e},gifs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O(),t=arguments.length>1?arguments[1]:void 0;if("gifs/FETCH_PENDING"===t.type)return m({},e,{pendingRequests:e.pendingRequests+1});if("gifs/FETCH_FULFILLED"===t.type){var n=t.payload,r=n.id,i=n.response;if(e.id!==r)return e;var c=i.data,u=i.pagination,o=e.gifs.reduce(function(e,t){return e[t.id]=!0,e},{}),a=[].concat(Object(d.a)(e.gifs),Object(d.a)(c.filter(function(e){return void 0===o[e.id]}))),l=Math.max(e.offset,u.offset+u.count);return m({},e,{gifs:a,offset:l,totalCount:u.total_count,pendingRequests:e.pendingRequests-1})}return t.type===h?O(e.id+1):e},viewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gifIndex:null},t=arguments.length>1?arguments[1]:void 0;if(t.type===w)return{gifIndex:null};if("viewer/OPEN_GIF"===t.type){var n=t.payload.gifIndex;return{gifIndex:n}}return e}},J=Object(U.c)(B),V=(Object(T.createLogger)(),[H.a,Y.a]);var A=document.getElementById("root"),Q=Object(U.d)(J,U.a.apply(void 0,V));u.a.render(i.a.createElement(o.a,{store:Q},i.a.createElement(_,null)),A)}},[[37,1,2]]]);
//# sourceMappingURL=main.814afe60.chunk.js.map