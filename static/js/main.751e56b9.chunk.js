(window["webpackJsonpsimple-giphy-search"]=window["webpackJsonpsimple-giphy-search"]||[]).push([[0],{37:function(e,t,n){e.exports=n(77)},54:function(e,t,n){},60:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=60},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(10),o=n.n(c),u=n(3),a=n(1),l=n(22),f=n.n(l),s=n(33),d=n(5),v=n(12),p=new(n(11).GiphyFetch)("5yFUiFNdRnPjpeUhzS2T2LGyw1Fi9ClD");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(v.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(n,r){var i=r(),c=i.search.query,o=i.gifs,u=o.id,a=o.offset,l=new Promise(function(){var e=Object(s.a)(f.a.mark(function e(t,n){var r,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=""===c?p.trending({offset:a}):p.search(c,{offset:a}),e.prev=1,e.next=4,r;case 4:i=e.sent,t({id:u,response:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}());return n({type:"gifs/FETCH",payload:l}).catch(function(){return t?n(e(!1)):Promise.resolve()})}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{id:e,gifs:[],pendingRequests:0,offset:0}},O="search/UPDATE_QUERY",y=(n(54),n(13)),w="viewer/CLOSE",E=n(14),j=Object(E.a)(function(e){return e.gifs.pendingRequests},function(e){return e>0}),P=Object(E.a)(function(e){return e.gifs.offset},function(e){return e.gifs.totalCount},function(e,t){return void 0===t||e<t}),k=Object(E.a)(function(e){return e.viewer.gifIndex},function(e){return e.gifs.gifs},function(e,t){return null!==e?t[e]:null}),N=(n(73),n(19));function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(v.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Object(r.useRef)(null),c=Object(r.useRef)(null),o=Object(r.useRef)(t);return Object(r.useEffect)(function(){null===i.current||null!==c.current&&o.current===t||(c.current=Object(N.default)(x({},e,{container:i.current})),c.current.resize(!0).pack(),o.current=t),null!==c.current&&c.current.update()},[i].concat(Object(d.a)(n))),{ref:i,currentSize:D(e.sizes)}};function D(e){return e.reduce(function(e,t){return window.matchMedia("(min-width: ".concat(t.mq,")")).matches?t:e})}var G=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=Object(a.a)(t,2),i=n[0],c=n[1],o=Object(r.useCallback)(function(){null!==e.current&&c(e.current.getBoundingClientRect())},[e]),u=Object(r.useCallback)(function(t){null!==t&&(e.current=t,o())},[o]);return Object(r.useEffect)(function(){return window.addEventListener("resize",o),function(){window.removeEventListener("resize",o)}}),[i,u]},I=function(e){var t=e.element,n=e.onVisiblilityChange,i=e.threshold,c=void 0===i?0:i,o=e.rootMargin,u=void 0===o?"0px":o;Object(r.useEffect)(function(){var e=new IntersectionObserver(function(e){var t=Object(a.a)(e,1)[0];n(t.isIntersecting)},{threshold:c,rootMargin:u});return null!==t&&e.observe(t),function(){null!==t&&e.disconnect()}})};var R={close:function(){return{type:w}}},F=Object(u.b)(function(e){return{gif:k(e)}},R)(function(e){var t=e.gif,n=e.close,c=G(),o=Object(a.a)(c,2),u=o[0],l=o[1];if(Object(r.useEffect)(function(){return document.documentElement.style.overflow=null!==t?"hidden":null,document.body.style.overflowY=null!==t?"scroll":null,function(){document.documentElement.style.overflow=null,document.body.style.overflowY=null}},[t]),Object(r.useEffect)(function(){function e(e){"Escape"===e.key&&n()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),null===t)return null;var f=600;if(null!==u){var s=t.images.original,d=Math.min(2*s.width,u.width);f=s.height/s.width*d>u.height?u.height*s.width/s.height:d}return i.a.createElement("div",{className:"fullscreen-viewer",onClick:function(e){n(),e.preventDefault()}},i.a.createElement("div",{ref:l,className:"fullscreen-viewer-content"},i.a.createElement(y.Gif,{gif:t,width:f,backgroundColor:"black"})))}),L=(n(74),n(75),function(){return i.a.createElement("div",{className:"lds-ellipsis"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))});var S={fetchGifs:b,openGif:function(e){return{type:"viewer/OPEN_GIF",payload:{gifIndex:e}}}},z=Object(u.b)(function(e){return{query:e.search.query,gifs:e.gifs.gifs,isLoading:j(e),moreGifs:P(e)}},S)(function(e){var t=e.query,n=e.gifs,c=e.isLoading,o=e.moreGifs,u=e.fetchGifs,l=e.openGif;Object(r.useEffect)(u,[u]);var f=C({packed:"packed",sizes:[{columns:2,gutter:8},{mq:"768px",columns:3,gutter:12},{mq:"1024px",columns:4,gutter:16},{mq:"1260px",columns:4,gutter:16}]},t,[n]),s=f.ref,d=f.currentSize,v=d.gutter,p=d.columns,g=200,m=G(),b=Object(a.a)(m,2),h=b[0],O=b[1];null!==h&&(g=Math.floor((h.width-v*(p-1))/p));var w=Object(r.useRef)(null);return I({element:w.current,onVisiblilityChange:function(e){e&&!c&&o&&u()},rootMargin:"200px"}),i.a.createElement("div",{ref:O},i.a.createElement("div",{ref:s,key:t,className:"gifs-container"},n.map(function(e,t){return i.a.createElement(y.Gif,{key:e.id,gif:e,width:g,backgroundColor:"#e8f4fd",onGifClick:function(e,n){return function(e,t){l(e),t.stopPropagation(),t.preventDefault()}(t,n)}})})),!c&&0===n.length&&i.a.createElement("div",{className:"info"},"No gifs found for ",i.a.createElement("b",null,t)),o&&i.a.createElement("div",{ref:w,className:"loader-container"},c&&i.a.createElement(L,null)),!o&&n.length>0&&i.a.createElement("div",{className:"info"},"No more gifs."))});var M={search:function(e){return function(t){t(function(e){return{type:O,payload:{query:e}}}(e)),t(b())}}},_=Object(u.b)(null,M)(function(e){var t=e.search,n=Object(r.useState)(""),c=Object(a.a)(n,2),o=c[0],u=c[1];return i.a.createElement("div",{className:"app container"},i.a.createElement("nav",{className:"header"},i.a.createElement("div",{className:"header-content container"},i.a.createElement("form",{onSubmit:function(e){t(o),e.preventDefault()}},i.a.createElement("input",{type:"text",placeholder:"Search for GIFs",value:o,onChange:function(e){u(e.target.value)}})))),i.a.createElement("div",{className:"main"},i.a.createElement(z,null),i.a.createElement(F,null)))}),U=n(4),T=n(34),H=n(35),Y=n(36),B={search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:""},t=arguments.length>1?arguments[1]:void 0;if(t.type===O){var n=t.payload.query;return{query:n}}return e},gifs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h(),t=arguments.length>1?arguments[1]:void 0;if("gifs/FETCH_PENDING"===t.type)return m({},e,{pendingRequests:e.pendingRequests+1});if("gifs/FETCH_FULFILLED"===t.type){var n=t.payload,r=n.id,i=n.response;if(e.id!==r)return e;var c=i.data,o=i.pagination;if(0===c.length&&void 0===o)return e;var u=e.gifs.reduce(function(e,t){return e[t.id]=!0,e},{}),a=[].concat(Object(d.a)(e.gifs),Object(d.a)(c.filter(function(e){return void 0===u[e.id]}))),l=Math.max(e.offset,o.offset+o.count);return m({},e,{gifs:a,offset:l,totalCount:o.total_count,pendingRequests:e.pendingRequests-1})}return t.type===O?h(e.id+1):e},viewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gifIndex:null},t=arguments.length>1?arguments[1]:void 0;if(t.type===w)return{gifIndex:null};if("viewer/OPEN_GIF"===t.type){var n=t.payload.gifIndex;return{gifIndex:n}}return e}},J=Object(U.c)(B),V=(Object(T.createLogger)(),[H.a,Y.a]);var A=document.getElementById("root"),Q=Object(U.d)(J,U.a.apply(void 0,V));o.a.render(i.a.createElement(u.a,{store:Q},i.a.createElement(_,null)),A)}},[[37,1,2]]]);
//# sourceMappingURL=main.751e56b9.chunk.js.map