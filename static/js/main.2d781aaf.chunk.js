(window["webpackJsonpsimple-giphy-search"]=window["webpackJsonpsimple-giphy-search"]||[]).push([[0],{37:function(e,t,n){e.exports=n(76)},54:function(e,t,n){},60:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=60},73:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(10),a=n.n(i),u=n(6),o=n(2),s=n(20),f=n.n(s),l=n(32),p=n(4),d=n(12),g=new(n(11).GiphyFetch)("5yFUiFNdRnPjpeUhzS2T2LGyw1Fi9ClD");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=function(){return function(e,t){var n=t(),r=n.search.query,c=n.gifs,i=c.id,a=c.offset;return e({type:"gifs/FETCH",payload:new Promise(function(){var e=Object(l.a)(f.a.mark(function e(t){var n,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=""===r?g.trending({offset:a}):g.search(r,{offset:a}),e.next=3,n;case 3:c=e.sent,t({id:i,response:c});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{id:e,gifs:[],pendingRequests:0,offset:0}},y="search/UPDATE_QUERY",h=(n(54),n(33)),j=n(21),E=Object(j.a)(function(e){return e.gifs.pendingRequests},function(e){return e>0}),w=Object(j.a)(function(e){return e.gifs.offset},function(e){return e.gifs.totalCount},function(e,t){return void 0===t||e<t}),P=(n(73),n(17));function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=Object(r.useRef)(null),i=Object(r.useRef)(null),a=Object(r.useRef)(t);return Object(r.useEffect)(function(){null===c.current||null!==i.current&&a.current===t||(i.current=Object(P.default)(D({},e,{container:c.current})),i.current.resize(!0).pack(),a.current=t),null!==i.current&&i.current.update()},[c].concat(Object(p.a)(n))),{ref:c,currentSize:C(e.sizes)}};function C(e){return e.reduce(function(e,t){return window.matchMedia("(min-width: ".concat(t.mq,")")).matches?t:e})}var R=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(null),n=Object(o.a)(t,2),c=n[0],i=n[1],a=Object(r.useCallback)(function(){null!==e.current&&i(e.current.getBoundingClientRect())},[e]),u=Object(r.useCallback)(function(t){null!==t&&(e.current=t,a())},[a]);return Object(r.useEffect)(function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[c,u]},x=function(e){var t=e.element,n=e.onVisiblilityChange,c=e.threshold,i=void 0===c?0:c,a=e.rootMargin,u=void 0===a?"0px":a;Object(r.useEffect)(function(){var e=new IntersectionObserver(function(e){var t=Object(o.a)(e,1)[0];n(t.isIntersecting)},{threshold:i,rootMargin:u});return null!==t&&e.observe(t),function(){null!==t&&e.disconnect()}})},F=(n(74),function(){return c.a.createElement("div",{className:"lds-ellipsis"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))});var N=Object(u.b)(function(e){return{query:e.search.query,gifs:e.gifs.gifs,isLoading:E(e),moreGifs:w(e)}},{fetchGifs:O})(function(e){var t=e.query,n=e.gifs,i=e.isLoading,a=e.moreGifs,u=e.fetchGifs,s=k({packed:"packed",sizes:[{columns:2,gutter:8},{mq:"768px",columns:3,gutter:12},{mq:"1024px",columns:4,gutter:16},{mq:"1260px",columns:4,gutter:16}]},t,[n]),f=s.ref,l=s.currentSize,p=l.gutter,d=l.columns,g=200,b=R(),v=Object(o.a)(b,2),O=v[0],m=v[1];null!==O&&(g=Math.floor((O.width-p*(d-1))/d));var y=Object(r.useRef)(null);return x({element:y.current,onVisiblilityChange:function(e){e&&!i&&a&&u()},rootMargin:"200px"}),c.a.createElement("div",{ref:m},c.a.createElement("div",{ref:f,key:t},n.map(function(e){return c.a.createElement(h.Gif,{key:e.id,gif:e,width:g,backgroundColor:"#e8f4fd"})})),a&&c.a.createElement("div",{ref:y,className:"loader-container"},i&&c.a.createElement(F,null)))});var S={search:function(e){return function(t){t(function(e){return{type:y,payload:{query:e}}}(e)),t(O())}}},L=Object(u.b)(null,S)(function(e){var t=e.search,n=Object(r.useState)(""),i=Object(o.a)(n,2),a=i[0],u=i[1];return c.a.createElement("div",{className:"app container"},c.a.createElement("nav",{className:"header"},c.a.createElement("div",{className:"header-content container"},c.a.createElement("form",{onSubmit:function(e){t(a),e.preventDefault()}},c.a.createElement("input",{type:"text",placeholder:"Search for GIFs",value:a,onChange:function(e){u(e.target.value)}})))),c.a.createElement("div",{className:"main"},c.a.createElement(N,null)))}),G=n(3),z=n(34),M=n(35),U=n(36),I={search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:""},t=arguments.length>1?arguments[1]:void 0;if(t.type===y){var n=t.payload.query;return{query:n}}return e},gifs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(),t=arguments.length>1?arguments[1]:void 0;if("gifs/FETCH_PENDING"===t.type)return v({},e,{pendingRequests:e.pendingRequests+1});if("gifs/FETCH_FULFILLED"===t.type){var n=t.payload,r=n.id,c=n.response;if(e.id!==r)return e;var i=c.data,a=c.pagination,u=[].concat(Object(p.a)(e.gifs),Object(p.a)(i)),o=Math.max(e.offset,a.offset+a.count);return v({},e,{gifs:u,offset:o,totalCount:a.total_count,pendingRequests:e.pendingRequests-1})}return t.type===y?m(e.id+1):e}},T=Object(G.c)(I),_=(Object(z.createLogger)(),[M.a,U.a]);var H=document.getElementById("root"),B=Object(G.d)(T,G.a.apply(void 0,_));a.a.render(c.a.createElement(u.a,{store:B},c.a.createElement(L,null)),H)}},[[37,1,2]]]);
//# sourceMappingURL=main.2d781aaf.chunk.js.map